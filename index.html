function drawMap() {
  ctx.strokeStyle = 'white';
  ctx.lineWidth = 1.8;  // сделай толще или тоньше на вкус
  ctx.beginPath();

  // Проходим по строкам и рисуем горизонтальные линии стен
  for (let y = 0; y <= map.length; y++) {
    let startX = null;
    for (let x = 0; x < map[0].length; x++) {
      const above = (y > 0 && map[y-1][x] === 1);
      const below = (y < map.length && map[y] && map[y][x] === 1);

      // Линия нужна если есть стена сверху, а снизу нет (нижняя граница стены)
      // или наоборот — чтобы соединять блоки
      if (above !== below) {
        if (startX === null) startX = x;
      } else {
        if (startX !== null) {
          ctx.moveTo(startX * tileSize, y * tileSize);
          ctx.lineTo(x * tileSize, y * tileSize);
          startX = null;
        }
      }
    }
    if (startX !== null) {
      ctx.moveTo(startX * tileSize, y * tileSize);
      ctx.lineTo(map[0].length * tileSize, y * tileSize);
    }
  }

  // Проходим по столбцам и рисуем вертикальные линии стен
  for (let x = 0; x <= map[0].length; x++) {
    let startY = null;
    for (let y = 0; y < map.length; y++) {
      const left = (x > 0 && map[y][x-1] === 1);
      const right = (x < map[0].length && map[y][x] === 1);

      if (left !== right) {
        if (startY === null) startY = y;
      } else {
        if (startY !== null) {
          ctx.moveTo(x * tileSize, startY * tileSize);
          ctx.lineTo(x * tileSize, y * tileSize);
          startY = null;
        }
      }
    }
    if (startY !== null) {
      ctx.moveTo(x * tileSize, startY * tileSize);
      ctx.lineTo(x * tileSize, map.length * tileSize);
    }
  }

  ctx.stroke();
}
